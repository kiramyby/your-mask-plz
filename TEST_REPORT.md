# 口罩检测模型测试报告

## 1. 引言 (Introduction)
本报告展示了口罩检测模型的评估结果。该模型的目标是准确检测图像中的人物是否佩戴了口罩。模型基于 YOLO 架构，并在包含佩戴口罩和未佩戴口罩人物的图像数据集上进行了训练。

## 2. 实验设置 (Experimental Setup)

### 2.1 数据集 (Dataset)
数据集分为训练集、验证集和测试集。
- **类别 (Classes)**: `no_mask` (未戴口罩), `mask` (戴口罩)
- **数据来源**: 数据集包含多种场景，如公共交通、机场和街道场景等。

### 2.2 模型配置 (Model Configuration)
- **模型架构**: YOLO11n
- **训练轮数 (Epochs)**: 100
- **优化器**: Auto (默认为 YOLO 默认设置)

## 3. 定量结果 (Quantitative Results - Validation)

模型在训练 100 轮后在验证集上进行了评估。关键指标总结如下：

| 指标 (Metric) | 数值 (Value) | 描述 (Description) |
| :--- | :--- | :--- |
| **精确率 (Precision B)** | 0.886 | 正类预测的准确性。 |
| **召回率 (Recall B)** | 0.841 | 模型发现所有正类实例的能力。 |
| **mAP50 (B)** | 0.886 | IoU 阈值为 0.50 时的平均精度均值。 |
| **mAP50-95 (B)** | 0.514 | IoU 阈值从 0.50 到 0.95 的平均精度均值。 |

### 3.1 损失分析 (Loss Analysis)
训练过程显示损失值持续下降，表明学习有效：
- **框损失 (Box Loss)**: 降至约 1.18 (验证集)
- **分类损失 (Class Loss)**: 降至约 0.57 (验证集)
- **DFL 损失 (DFL Loss)**: 降至约 1.16 (验证集)

### 3.2 混淆矩阵与曲线 (Confusion Matrix & Curves)
评估生成了多个图表，可在 `runs/detect/val` 目录下查看：
- **混淆矩阵 (Confusion Matrix)**: 展示 `mask` 和 `no_mask` 类别之间的分类准确度。
- **F1-置信度曲线 (F1-Confidence Curve)**: 展示不同置信度阈值下精确率和召回率之间的权衡。
- **精确率-召回率曲线 (Precision-Recall Curve)**: 展示模型在不同阈值下的性能。

### 3.3 测试集结果 (Test Set Results)
为了验证模型的泛化能力，我们在独立的测试集 (`split='test'`) 上进行了评估。测试集包含 120 张图像和 659 个实例。

| 类别 (Class) | 图片数 (Images) | 实例数 (Instances) | 精确率 (Precision) | 召回率 (Recall) | mAP50 | mAP50-95 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **总体 (All)** | 120 | 659 | 0.869 | 0.861 | 0.894 | 0.560 |
| **no_mask** | 46 | 156 | 0.826 | 0.790 | 0.819 | 0.451 |
| **mask** | 104 | 503 | 0.912 | 0.932 | 0.968 | 0.669 |

**分析**:
- 模型在测试集上的表现 (mAP50 89.4%) 略优于验证集 (mAP50 88.6%)，这表明模型没有过拟合，且具有良好的泛化能力。
- `mask` 类别的检测效果显著优于 `no_mask` 类别 (mAP50: 96.8% vs 81.9%)。这可能是因为 `no_mask` 的特征（人脸多样性）比口罩特征更复杂。

## 4. 定性结果 (Qualitative Results - Prediction)

模型在 `runs/detect/predict` 目录下的多样化图像集上进行了测试。测试集包含具有挑战性的场景，例如：
- 人群密集场所（如：`people-waiting-at-bus-stop`, `airport-passengers`）
- 特写镜头（如：`Model-with-White-face-mask`）
- 各种光照条件

### 观察结果 (Observations)
- 模型在单人和人群场景中均表现出稳健的检测能力。
- 在大多数场景下，它能成功区分戴口罩和未戴口罩的人脸。

## 5. 结论 (Conclusion)
口罩检测模型 (YOLO11n) 在验证集上实现了 **88.6% 的 mAP50**，在独立测试集上实现了 **89.4% 的 mAP50**。这些结果表明该模型在口罩检测任务上非常有效，且具有良好的泛化能力。

未来的工作可能包括：
- 针对 `no_mask` 类别收集更多样化的数据，以平衡类别间的性能差异。
- 针对困难负样本 (hard-negative examples) 进行微调以提高召回率。
- 在视频流上进行测试以评估实时性能。
